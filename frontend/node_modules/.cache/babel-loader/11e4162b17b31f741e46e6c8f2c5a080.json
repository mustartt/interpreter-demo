{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/henry/source/interpreter-demo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/henry/source/interpreter-demo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/henry/source/interpreter-demo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/henry/source/interpreter-demo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/henry/source/interpreter-demo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Editor from'react-simple-code-editor';import{highlight,languages}from'prismjs/components/prism-core';import'prismjs/components/prism-clike';import'prismjs/components/prism-javascript';import'prismjs/components/prism-markup';import'prismjs/components/prism-python';import styles from'./App.css';// Import Components\nimport OutputConsole from'./components/OutputConsole';import Header from'./components/Header';import REPL from'./components/REPL';import socketIOClient from\"socket.io-client\";var ENDPOINT=\"https://interpreter-demo.herokuapp.com/\";var tempcode=\"\\nload lang/higher-order.lang;\\n\\n# fib(n) recursively computes the n-th fibonacci number\\n# fib: Nat -> Nat\\nbind fib = lambda({n} -> \\n  if(<=(n 1)\\n    n\\n    +(fib(-(n 1)) \\n      fib(-(n 2)))));\\n\\n# function evaluation\\nfib(10);\\n\\n# example for higher-order functions\\nreduce(+ 0 map(fib list(1 2 3 4 5 6 7 8 9 10)));\\n\";var tempout=\"Welcome to The \\u03BB Interpreter [version 0.1].\\n\\u03BB \";function highcust(program){var temp=highlight(program,languages.python);temp=temp.replace('bind','<span class=\"token keyword\">bind</span>');temp=temp.replace('local','<span class=\"token keyword\">local</span>');temp=temp.replace('load','<span class=\"token keyword\">load</span>');temp=temp.replace('λ','<span class=\"token keyword\">λ</span>');return temp;}var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);// console.log(highlight(tempcode))\n_this.state={code:tempcode,output:tempout,log:'',panel:'repl',// 'repl' or 'output'\nresponse:''};_this.execute=_this.execute.bind(_assertThisInitialized(_this));_this.reset=_this.reset.bind(_assertThisInitialized(_this));_this.sendCommand=_this.sendCommand.bind(_assertThisInitialized(_this));// setup socket\n_this.socket=socketIOClient(ENDPOINT);// setup buttons\n_this.changeToOutput=_this.changeToOutput.bind(_assertThisInitialized(_this));_this.changeToREPL=_this.changeToREPL.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log('App mounted. Creating Socket');// setup message handler\nthis.socket.on(\"msg_repl\",function(data){console.log(data);// update state\n_this2.setState({response:_this2.state.response+'\\n'+data});});}},{key:\"sendCommand\",value:function sendCommand(command){if(command===\"clear\"){this.setState({response:'> '});return;}this.setState({response:this.state.response+command});this.socket.emit('msg_client',command);}},{key:\"execute\",value:function execute(){var _this3=this;// swtich view to output\nthis.changeToOutput();// send POST request\nfetch('https://interpreter-demo.herokuapp.com/api',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({code:this.state.code})}).then(function(res){return res.json();}).then(function(json){console.log(\"Program Output: \"+(json.err?\"Failure\":\"Success\"));console.log(json.output);_this3.setState({code:_this3.state.code,output:tempout+'interperter input.lang\\n'+json.output});});}},{key:\"reset\",value:function reset(){this.setState({code:tempcode,output:tempout});}},{key:\"changeToOutput\",value:function changeToOutput(){this.setState({panel:'output'});}},{key:\"changeToREPL\",value:function changeToREPL(){this.setState({panel:'repl'});}},{key:\"render\",value:function render(){var _this4=this;//console.log(highlight(this.state.code, languages.js));\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container full-height\",children:[/*#__PURE__*/_jsx(Header,{execute:this.execute,reset:this.reset}),/*#__PURE__*/_jsxs(\"div\",{className:\"row fluid-height\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"code-area dropshadow\",children:/*#__PURE__*/_jsx(Editor,{className:\"code-editor\",value:this.state.code,onValueChange:function onValueChange(code){return _this4.setState({code:code});},highlight:function highlight(code){return highcust(code);},padding:10,style:{fontFamily:'\"Fira code\", \"Fira Mono\", monospace',fontSize:12}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"console-area dropshadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tab-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab dropshadow \"+(this.state.panel==='repl'?'active':''),onClick:this.changeToREPL,children:\"REPL\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab dropshadow \"+(this.state.panel==='repl'?'':'active'),onClick:this.changeToOutput,children:\"Output\"})]}),this.state.panel==='repl'?/*#__PURE__*/_jsx(REPL,{sendHandler:this.sendCommand,log:this.state.response}):/*#__PURE__*/_jsx(OutputConsole,{output:this.state.output})]})})]})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/henry/source/interpreter-demo/frontend/src/App.js"],"names":["React","Editor","highlight","languages","styles","OutputConsole","Header","REPL","socketIOClient","ENDPOINT","tempcode","tempout","highcust","program","temp","python","replace","App","props","state","code","output","log","panel","response","execute","bind","reset","sendCommand","socket","changeToOutput","changeToREPL","console","on","data","setState","command","emit","fetch","method","headers","body","JSON","stringify","then","res","json","err","fontFamily","fontSize","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Editor from 'react-simple-code-editor';\nimport {highlight, languages} from 'prismjs/components/prism-core';\nimport 'prismjs/components/prism-clike';\nimport 'prismjs/components/prism-javascript';\nimport 'prismjs/components/prism-markup';\nimport 'prismjs/components/prism-python'\n\nimport styles from './App.css'\n\n// Import Components\nimport OutputConsole from './components/OutputConsole'\nimport Header from './components/Header'\nimport REPL from './components/REPL'\n\nimport socketIOClient from \"socket.io-client\";\nconst ENDPOINT = \"https://interpreter-demo.herokuapp.com/\";\n\nconst tempcode = \n`\nload lang/higher-order.lang;\n\n# fib(n) recursively computes the n-th fibonacci number\n# fib: Nat -> Nat\nbind fib = lambda({n} -> \n  if(<=(n 1)\n    n\n    +(fib(-(n 1)) \n      fib(-(n 2)))));\n\n# function evaluation\nfib(10);\n\n# example for higher-order functions\nreduce(+ 0 map(fib list(1 2 3 4 5 6 7 8 9 10)));\n`;\n\nconst tempout = \n`Welcome to The λ Interpreter [version 0.1].\\nλ `\n\n\nfunction highcust(program) {\n  var temp = highlight(program, languages.python)\n  temp = temp.replace('bind', '<span class=\"token keyword\">bind</span>')\n  temp = temp.replace('local', '<span class=\"token keyword\">local</span>')\n  temp = temp.replace('load', '<span class=\"token keyword\">load</span>')\n  temp = temp.replace('λ', '<span class=\"token keyword\">λ</span>')\n  return temp\n}\n\nclass App extends React.Component {\n\n  state = { \n    code: tempcode, \n    output: tempout,\n    log: '',\n    panel: 'repl', // 'repl' or 'output'\n    response: ''\n    };\n\n  constructor(props) {\n    super(props)\n\n    // console.log(highlight(tempcode))\n\n    this.execute = this.execute.bind(this);\n    this.reset = this.reset.bind(this); \n    this.sendCommand = this.sendCommand.bind(this);\n\n    // setup socket\n    this.socket = socketIOClient(ENDPOINT);\n\n    // setup buttons\n    this.changeToOutput = this.changeToOutput.bind(this)\n    this.changeToREPL = this.changeToREPL.bind(this) \n  }\n\n  componentDidMount() {\n    console.log('App mounted. Creating Socket')\n    // setup message handler\n    this.socket.on(\"msg_repl\", data => {\n      console.log(data)\n      // update state\n\n      this.setState({response: this.state.response + '\\n' + data})\n    });\n  }\n\n  sendCommand(command) {\n    if (command === \"clear\") {\n      this.setState({response: '> '})\n      return\n    }\n\n    this.setState({response: this.state.response + command})\n    this.socket.emit('msg_client', command)\n  }\n  \n  execute() {\n    // swtich view to output\n    this.changeToOutput()\n\n    // send POST request\n    fetch('https://interpreter-demo.herokuapp.com/api', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        code: this.state.code\n      })\n    })\n    .then((res) => res.json())\n    .then((json) => {\n      console.log(\"Program Output: \" + (json.err ? \"Failure\" : \"Success\"))\n      console.log(json.output)\n      this.setState({ code: this.state.code, \n        output: tempout + 'interperter input.lang\\n' + json.output })\n    })\n  }\n\n  reset() {\n    this.setState({ code: tempcode, output: tempout })\n  }\n\n  changeToOutput() {\n    this.setState({ panel: 'output' })\n  } \n\n  changeToREPL() {\n    this.setState({ panel: 'repl' })\n  }\n\n  render() {\n    //console.log(highlight(this.state.code, languages.js));\n    return (\n      <div className=\"container full-height\">\n\n        <Header execute={this.execute} reset={this.reset} />\n\n        <div className=\"row fluid-height\">\n          <div className=\"col-lg-6\">\n            <div className=\"code-area dropshadow\">\n              <Editor \n                className=\"code-editor\"\n                value={this.state.code}\n                onValueChange={code => this.setState({ code })}\n                highlight={code => highcust(code)}\n                padding={10}\n                style={{\n                  fontFamily: '\"Fira code\", \"Fira Mono\", monospace',\n                  fontSize: 12,\n                }}\n              />\n            </div>\n          </div>\n\n          <div className=\"col-lg-6\">\n            <div class=\"console-area dropshadow\">\n              <div className=\"tab-container\">\n                <button \n                  className={\"tab dropshadow \" + ((this.state.panel === 'repl') ? 'active' : '')}\n                  onClick={this.changeToREPL}\n                  >REPL</button>\n                <button \n                  className={\"tab dropshadow \" + ((this.state.panel === 'repl') ? '' : 'active')}\n                  onClick={this.changeToOutput}\n                  >Output</button>\n              </div>\n              \n              { (this.state.panel === 'repl') ? \n                <REPL sendHandler={this.sendCommand} log={this.state.response}/> :\n                <OutputConsole output={this.state.output}/> }\n\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}